# å®éªŒå‘½ä»¤è¡Œæ“ä½œæŒ‡å—

## ğŸ“‹ ç›®å½•
- [åŸºç¡€å®éªŒå‘½ä»¤](#åŸºç¡€å®éªŒå‘½ä»¤)
- [æ¶ˆèå®éªŒå‘½ä»¤](#æ¶ˆèå®éªŒå‘½ä»¤)
- [å‚æ•°è°ƒä¼˜å®éªŒå‘½ä»¤](#å‚æ•°è°ƒä¼˜å®éªŒå‘½ä»¤)
- [å®éªŒè®°å½•å‘½ä»¤](#å®éªŒè®°å½•å‘½ä»¤)
- [ç»“æœåˆ†æå‘½ä»¤](#ç»“æœåˆ†æå‘½ä»¤)

---

## ğŸš€ åŸºç¡€å®éªŒå‘½ä»¤

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# æ¿€æ´»condaç¯å¢ƒ
conda activate MambaPro

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /home/zubuntu/workspace/yzy/MambaPro
```

### 2. åŸºçº¿å®éªŒ
```bash
# åŸºçº¿å®éªŒï¼ˆæ— å¤šå°ºåº¦ï¼Œæ— MoEï¼‰
python train_net.py --config_file configs/RGBNT201/MambaPro.yml --disable_moe

# ä»…å¤šå°ºåº¦æ»‘åŠ¨çª—å£å®éªŒ
python train_net.py --config_file configs/RGBNT201/MambaPro.yml --disable_moe --use_multi_scale

# å¤šå°ºåº¦æ»‘åŠ¨çª—å£ + MoEå®éªŒ
python train_net.py --config_file configs/RGBNT201/MambaPro.yml --use_moe

# âœ¨âœ¨ ä¼˜åŒ–MoEå®éªŒï¼ˆä½¿ç”¨ä¼˜åŒ–é…ç½®ï¼‰
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml
```

---

## ğŸ”¬ æ¶ˆèå®éªŒå‘½ä»¤

### 1. å•å°ºåº¦æ»‘åŠ¨çª—å£æ¶ˆè
```bash
# ä»…4Ã—4å°å°ºåº¦æ»‘åŠ¨çª—å£
python train_net.py --config_file configs/RGBNT201/ablation_scale4_only.yml

# ä»…8Ã—8ä¸­å°ºåº¦æ»‘åŠ¨çª—å£
python train_net.py --config_file configs/RGBNT201/ablation_scale8_only.yml

# ä»…16Ã—16å¤§å°ºåº¦æ»‘åŠ¨çª—å£
python train_net.py --config_file configs/RGBNT201/ablation_scale16_only.yml
```

### 2. å¤šå°ºåº¦ç»„åˆæ¶ˆè
```bash
# 2å°ºåº¦ç»„åˆï¼ˆ4Ã—4 + 8Ã—8ï¼‰
python train_net.py --config_file configs/RGBNT201/ablation_scale4_8.yml

# 2å°ºåº¦ç»„åˆï¼ˆ4Ã—4 + 16Ã—16ï¼‰
python train_net.py --config_file configs/RGBNT201/ablation_scale4_16.yml

# 2å°ºåº¦ç»„åˆï¼ˆ8Ã—8 + 16Ã—16ï¼‰
python train_net.py --config_file configs/RGBNT201/ablation_scale8_16.yml

# å®Œæ•´3å°ºåº¦ç»„åˆ
python train_net.py --config_file configs/RGBNT201/MambaPro.yml --use_moe
```

### 3. MoEæ¶ˆèå®éªŒ
```bash
# ä»…å¤šå°ºåº¦æ»‘åŠ¨çª—å£ï¼ˆæ— MoEï¼‰
python train_net.py --config_file configs/RGBNT201/MambaPro.yml --disable_moe --use_multi_scale

# å¤šå°ºåº¦ + MoEï¼ˆå®Œæ•´æ–¹æ³•ï¼‰
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml
```

---

## âš™ï¸ å‚æ•°è°ƒä¼˜å®éªŒå‘½ä»¤

### 1. å­¦ä¹ ç‡è°ƒä¼˜
```bash
# ä½å­¦ä¹ ç‡å®éªŒ
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --base_lr 0.0002

# é«˜å­¦ä¹ ç‡å®éªŒ
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --base_lr 0.0008

# è¶…ä½å­¦ä¹ ç‡å®éªŒ
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --base_lr 0.0001
```

### 2. è®­ç»ƒè½®æ•°è°ƒä¼˜
```bash
# çŸ­è®­ç»ƒå®éªŒ
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --max_epochs 40

# é•¿è®­ç»ƒå®éªŒ
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --max_epochs 100

# è¶…é•¿è®­ç»ƒå®éªŒ
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --max_epochs 120
```

### 3. æ‰¹æ¬¡å¤§å°è°ƒä¼˜
```bash
# å°æ‰¹æ¬¡å®éªŒ
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --ims_per_batch 16

# å¤§æ‰¹æ¬¡å®éªŒ
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --ims_per_batch 64

# è¶…å¤§æ‰¹æ¬¡å®éªŒ
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --ims_per_batch 128
```

### 4. MoEå‚æ•°è°ƒä¼˜
```bash
# ä¸“å®¶ç½‘ç»œç»´åº¦è°ƒä¼˜
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --moe_expert_hidden_dim 512
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --moe_expert_hidden_dim 2048

# æ¸©åº¦å‚æ•°è°ƒä¼˜
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --moe_temperature 0.3
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --moe_temperature 1.2
```

---

## ğŸ“ å®éªŒè®°å½•å‘½ä»¤

### 1. åŸºç¡€è®°å½•
```bash
# è®°å½•åŸºçº¿å®éªŒ
python quick_experiment_log.py configs/RGBNT201/MambaPro.yml "baseline_experiment"

# è®°å½•å¤šå°ºåº¦å®éªŒ
python quick_experiment_log.py configs/RGBNT201/MambaPro.yml "multi_scale_experiment"

# è®°å½•MoEå®éªŒ
python quick_experiment_log.py configs/RGBNT201/MambaPro_moe.yml "moe_experiment"
```

### 2. å‚æ•°è¦†ç›–è®°å½•
```bash
# è®°å½•åŸºç¡€å®éªŒï¼ˆæ‰€æœ‰å‚æ•°ï¼‰
python parameter_override_logger.py configs/RGBNT201/MambaPro.yml "baseline_experiment"

# è®°å½•å¤šå°ºåº¦å®éªŒï¼ˆå¯ç”¨å¤šå°ºåº¦ï¼‰
python parameter_override_logger.py configs/RGBNT201/MambaPro.yml "multi_scale_experiment" --use_multi_scale

# è®°å½•MoEå®éªŒï¼ˆå¯ç”¨MoEï¼‰
python parameter_override_logger.py configs/RGBNT201/MambaPro.yml "moe_experiment" --use_moe

# è®°å½•è‡ªå®šä¹‰å‚æ•°å®éªŒ
python parameter_override_logger.py configs/RGBNT201/MambaPro.yml "custom_experiment" --use_moe --base_lr 0.0003 --max_epochs 80 --moe_expert_hidden_dim 512 --moe_temperature 0.5
```

### 3. å‚æ•°è°ƒä¼˜è®°å½•
```bash
# å­¦ä¹ ç‡è°ƒä¼˜è®°å½•
python parameter_override_logger.py configs/RGBNT201/MambaPro.yml "lr_tuning_experiment" --use_moe --base_lr 0.0002

# ä¸“å®¶ç»´åº¦è°ƒä¼˜è®°å½•
python parameter_override_logger.py configs/RGBNT201/MambaPro.yml "expert_dim_tuning" --use_moe --moe_expert_hidden_dim 2048

# æ¸©åº¦å‚æ•°è°ƒä¼˜è®°å½•
python parameter_override_logger.py configs/RGBNT201/MambaPro.yml "temperature_tuning" --use_moe --moe_temperature 0.3
```

### 4. å¢å¼ºè®°å½•
```bash
# ä½¿ç”¨å¢å¼ºè®°å½•å™¨
python enhanced_experiment_logger.py configs/RGBNT201/MambaPro_moe.yml "moe_optimization_experiment" --use_moe
```

---

## ğŸ“Š ç»“æœåˆ†æå‘½ä»¤

### 1. æŸ¥çœ‹å®éªŒè®°å½•
```bash
# æŸ¥çœ‹æ‰€æœ‰å®éªŒè®°å½•
ls experiment_logs/

# æŸ¥çœ‹å®éªŒæ€»ç»“
python quick_experiment_log.py

# æŸ¥çœ‹å…·ä½“å®éªŒè®°å½•
cat experiment_logs/baseline_experiment_20240926_143022.json
```

### 2. ç»“æœå¯¹æ¯”åˆ†æ
```bash
# ç”Ÿæˆå¯¹æ¯”è¡¨æ ¼
python -c "
import json
import pandas as pd

# è¯»å–å®éªŒè®°å½•
experiments = []
with open('experiment_logs/all_experiments.jsonl', 'r') as f:
    for line in f:
        experiments.append(json.loads(line))

# åˆ›å»ºå¯¹æ¯”è¡¨æ ¼
df = pd.DataFrame(experiments)
print(df[['experiment_name', 'results']].to_string())
"
```

### 3. å¯è§†åŒ–åˆ†æ
```bash
# ç”Ÿæˆè®­ç»ƒæ›²çº¿
python -c "
import matplotlib.pyplot as plt
import json

# è¯»å–è®­ç»ƒè¿›åº¦
with open('experiment_logs/training_progress.jsonl', 'r') as f:
    progress = [json.loads(line) for line in f]

# ç»˜åˆ¶æŸå¤±æ›²çº¿
epochs = [p['epoch'] for p in progress]
losses = [p['loss'] for p in progress]

plt.plot(epochs, losses)
plt.title('Training Loss Curve')
plt.xlabel('Epoch')
plt.ylabel('Loss')
plt.savefig('training_curve.png')
plt.show()
"
```

---

## ğŸ”§ é«˜çº§å®éªŒå‘½ä»¤

### 1. å¹¶è¡Œå®éªŒ
```bash
# åŒæ—¶è¿è¡Œå¤šä¸ªå®éªŒï¼ˆåå°è¿è¡Œï¼‰
nohup python train_net.py --config_file configs/RGBNT201/MambaPro.yml --disable_moe > baseline.log 2>&1 &
nohup python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml > moe.log 2>&1 &
```

### 2. æ¢å¤è®­ç»ƒ
```bash
# ä»æ£€æŸ¥ç‚¹æ¢å¤è®­ç»ƒ
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --resume outputs/moe_optimized_experiment/checkpoint_epoch_30.pth
```

### 3. ä»…æµ‹è¯•æ¨¡å¼
```bash
# ä»…æµ‹è¯•å·²è®­ç»ƒæ¨¡å‹
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --test_only --weight outputs/moe_optimized_experiment/best_model.pth
```

### 4. è‡ªå®šä¹‰è¾“å‡ºç›®å½•
```bash
# æŒ‡å®šè¾“å‡ºç›®å½•
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --output_dir outputs/custom_experiment
```

---

## ğŸ“‹ å®éªŒæ£€æŸ¥æ¸…å•

### å®éªŒå‰æ£€æŸ¥
- [ ] ç¡®è®¤condaç¯å¢ƒå·²æ¿€æ´»
- [ ] ç¡®è®¤é…ç½®æ–‡ä»¶å­˜åœ¨
- [ ] ç¡®è®¤æ•°æ®é›†è·¯å¾„æ­£ç¡®
- [ ] ç¡®è®¤GPUå¯ç”¨
- [ ] ç¡®è®¤è¾“å‡ºç›®å½•æƒé™

### å®éªŒä¸­ç›‘æ§
- [ ] ç›‘æ§GPUä½¿ç”¨ç‡ï¼š`nvidia-smi`
- [ ] ç›‘æ§è®­ç»ƒè¿›åº¦ï¼šæŸ¥çœ‹æ—¥å¿—è¾“å‡º
- [ ] ç›‘æ§å†…å­˜ä½¿ç”¨ï¼š`htop`
- [ ] ç›‘æ§ç£ç›˜ç©ºé—´ï¼š`df -h`

### å®éªŒååˆ†æ
- [ ] æ£€æŸ¥å®éªŒç»“æœæ–‡ä»¶
- [ ] å¯¹æ¯”æ€§èƒ½æŒ‡æ ‡
- [ ] åˆ†æè®­ç»ƒæ›²çº¿
- [ ] è®°å½•å®éªŒå‘ç°
- [ ] æ›´æ–°å®éªŒè®°å½•

---

## ğŸš¨ å¸¸è§é—®é¢˜è§£å†³

### 1. å†…å­˜ä¸è¶³
```bash
# å‡å°‘æ‰¹æ¬¡å¤§å°
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --ims_per_batch 16

# å‡å°‘ä¸“å®¶ç½‘ç»œç»´åº¦
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --moe_expert_hidden_dim 512
```

### 2. è®­ç»ƒä¸ç¨³å®š
```bash
# é™ä½å­¦ä¹ ç‡
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --base_lr 0.0002

# å¢åŠ é¢„çƒ­è½®æ•°
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --warmup_iters 40
```

### 3. æ”¶æ•›æ…¢
```bash
# æé«˜å­¦ä¹ ç‡
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --base_lr 0.0008

# å¢åŠ è®­ç»ƒè½®æ•°
python train_net.py --config_file configs/RGBNT201/MambaPro_moe.yml --max_epochs 100
```

---

## ğŸ“š å®éªŒè®°å½•æ¨¡æ¿

### å®éªŒè®°å½•æ ¼å¼
```markdown
# å®éªŒè®°å½•ï¼š{experiment_name}

## åŸºæœ¬ä¿¡æ¯
- å®éªŒæ—¶é—´ï¼š{timestamp}
- é…ç½®æ–‡ä»¶ï¼š{config_file}
- å®éªŒå‚æ•°ï¼š{parameters}

## å®éªŒç»“æœ
- mAPï¼š{mAP}%
- Rank-1ï¼š{Rank-1}%
- è®­ç»ƒæ—¶é—´ï¼š{training_time}

## åˆ†æç»“è®º
- ä¸»è¦å‘ç°ï¼š{findings}
- æŠ€æœ¯è´¡çŒ®ï¼š{contributions}
- æ”¹è¿›å»ºè®®ï¼š{improvements}
```

---

## ğŸ¯ æœ€ä½³å®è·µå»ºè®®

### 1. å®éªŒé¡ºåº
1. å…ˆè¿è¡ŒåŸºçº¿å®éªŒ
2. å†è¿è¡Œæ¶ˆèå®éªŒ
3. æœ€åè¿è¡Œå‚æ•°è°ƒä¼˜å®éªŒ

### 2. å‚æ•°è®°å½•
1. ä½¿ç”¨å‚æ•°è¦†ç›–è®°å½•å™¨
2. è®°å½•æ‰€æœ‰å…³é”®å‚æ•°
3. ä¿å­˜å®éªŒé…ç½®å‰¯æœ¬

### 3. ç»“æœåˆ†æ
1. åŠæ—¶åˆ†æå®éªŒç»“æœ
2. å¯¹æ¯”ä¸åŒé…ç½®æ€§èƒ½
3. è®°å½•å®éªŒå‘ç°

### 4. å®éªŒç®¡ç†
1. ä½¿ç”¨ç»Ÿä¸€çš„å‘½åè§„èŒƒ
2. å®šæœŸå¤‡ä»½å®éªŒè®°å½•
3. ç»´æŠ¤å®éªŒæ—¥å¿—

---

*æœ€åæ›´æ–°ï¼š2024-09-26*
*ç‰ˆæœ¬ï¼šv1.0*
