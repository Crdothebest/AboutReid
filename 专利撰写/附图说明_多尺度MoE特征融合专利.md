# 专利附图说明

## 发明名称
基于多尺度滑动窗口和专家网络的特征融合方法及系统

## 附图说明

### 图1：多尺度滑动窗口特征提取流程图

**图1说明**：
- **图1a**：输入特征序列示意图，显示形状为[B, N, D]的patch tokens
- **图1b**：4×4滑动窗口处理过程，显示卷积核大小为4，步长为4的一维卷积操作
- **图1c**：8×8滑动窗口处理过程，显示卷积核大小为8，步长为8的一维卷积操作  
- **图1d**：16×16滑动窗口处理过程，显示卷积核大小为16，步长为16的一维卷积操作
- **图1e**：全局平均池化过程，显示每个尺度输出的池化操作
- **图1f**：多尺度特征输出，显示三个不同尺度的特征向量

**技术要点**：
- 滑动窗口使用一维卷积实现，卷积核大小等于窗口尺度
- 每个尺度的输出通过全局平均池化得到固定长度的特征向量
- 当输入序列长度小于最小窗口尺度时，直接使用全局平均池化

### 图2：专家网络架构示意图

**图2说明**：
- **图2a**：专家网络整体架构，显示输入层、隐藏层、输出层和残差连接
- **图2b**：4×4尺度专家网络详细结构，显示多层感知机配置
- **图2c**：8×8尺度专家网络详细结构，显示多层感知机配置
- **图2d**：16×16尺度专家网络详细结构，显示多层感知机配置
- **图2e**：残差连接机制，显示输入特征与处理后的特征相加

**技术要点**：
- 每个专家网络包括至少两层全连接层
- 每个专家网络包括层归一化层和GELU激活函数
- 每个专家网络包括Dropout正则化层
- 残差连接保持梯度流动和信息传递

### 图3：门控网络决策机制图

**图3说明**：
- **图3a**：门控网络输入，显示多尺度特征拼接后的向量
- **图3b**：门控网络结构，显示多层感知机架构
- **图3c**：温度参数控制，显示温度参数对权重分布的影响
- **图3d**：Softmax归一化，显示权重归一化过程
- **图3e**：专家权重输出，显示各专家的权重分布

**技术要点**：
- 门控网络输入为多尺度特征拼接向量（1536维）
- 门控网络包括至少两层全连接层
- 温度参数控制权重分布的尖锐程度
- Softmax函数确保权重和为1

### 图4：加权融合过程示意图

**图4说明**：
- **图4a**：专家输出列表，显示各专家网络的处理结果
- **图4b**：权重广播过程，显示权重从[B, 3]扩展到[B, D]
- **图4c**：加权计算过程，显示权重与专家输出的逐元素相乘
- **图4d**：加权求和过程，显示各加权输出的求和操作
- **图4e**：融合特征输出，显示最终的加权融合结果

**技术要点**：
- 权重广播确保维度匹配
- 加权计算使用逐元素相乘
- 加权求和得到融合特征
- 融合过程保持特征维度不变

### 图5：完整系统架构图

**图5说明**：
- **图5a**：系统输入，显示输入特征序列
- **图5b**：多尺度滑动窗口模块，显示三个尺度的滑动窗口处理
- **图5c**：专家网络模块，显示三个专家网络的专业化处理
- **图5d**：门控网络模块，显示权重计算和决策过程
- **图5e**：特征融合模块，显示加权融合和最终处理
- **图5f**：系统输出，显示融合后的特征表示

**技术要点**：
- 系统采用模块化设计，各模块职责明确
- 数据流从输入到输出清晰可见
- 各模块间通过标准接口连接
- 系统支持端到端训练和推理

### 图6：跨模态行人重识别应用流程图

**图6说明**：
- **图6a**：多模态输入，显示RGB、NIR、TIR三种模态图像
- **图6b**：CLIP特征提取，显示CLIP视觉编码器的特征提取过程
- **图6c**：多尺度MoE处理，显示本发明方法的应用过程
- **图6d**：Mamba多模态融合，显示Mamba状态空间模型的处理
- **图6e**：特征匹配，显示跨模态特征相似度计算
- **图6f**：重识别结果，显示最终的匹配结果

**技术要点**：
- 应用流程清晰，各步骤职责明确
- 与CLIP和Mamba模型无缝集成
- 支持多模态输入和跨模态匹配
- 端到端处理，无需人工干预

### 图7：技术效果对比图

**图7说明**：
- **图7a**：性能指标对比，显示mAP、Rank-1、Rank-5、Rank-10的提升
- **图7b**：消融实验结果，显示各模块的贡献度
- **图7c**：不同尺度组合效果，显示多尺度组合的优势
- **图7d**：专家权重分布，显示门控网络的决策模式
- **图7e**：特征可视化，显示多尺度特征的互补性

**技术要点**：
- 相比基线方法在mAP和Rank-1指标上分别提升了2.6%和2.2%
- 消融实验验证了各模块的有效性
- 多尺度组合比单尺度效果更好
- 专家权重分布显示了自适应选择能力

### 图8：计算复杂度分析图

**图8说明**：
- **图8a**：参数量对比，显示各方法的参数量对比
- **图8b**：计算量对比，显示FLOPs的对比分析
- **图8c**：训练时间对比，显示训练时间的对比
- **图8d**：推理时间对比，显示推理时间的对比
- **图8e**：内存占用对比，显示内存使用的对比

**技术要点**：
- 参数量仅增加1.5M，相对增加约1.7%
- 计算复杂度为O(N×D×S)，其中S为尺度数量
- 训练时间增加约8%，推理时间增加约5%
- 内存占用增加约25%，在可接受范围内

## 附图制作要求

### 1. 图形质量要求
- 所有图形应清晰、准确，线条粗细适中
- 文字标注清晰可读，字体大小适中
- 颜色搭配合理，突出重点信息
- 图形比例协调，布局美观

### 2. 技术标注要求
- 所有技术术语使用标准术语
- 数学符号和公式准确无误
- 维度标注清晰明确
- 数据流方向用箭头表示

### 3. 内容完整性要求
- 每个图形都应包含必要的技术信息
- 图形间应保持逻辑一致性
- 标注信息应准确反映技术内容
- 图形应支持技术方案的理解

### 4. 格式规范要求
- 图形编号按顺序排列
- 图形标题简洁明了
- 图例说明完整准确
- 符合专利附图规范

## 附图使用说明

### 1. 技术理解
- 图1-4用于理解核心技术方案
- 图5用于理解系统整体架构
- 图6用于理解具体应用场景
- 图7-8用于理解技术效果

### 2. 实施指导
- 图1-4提供具体实施的技术细节
- 图5提供系统集成的指导
- 图6提供应用部署的参考
- 图7-8提供性能评估的标准

### 3. 专利保护
- 所有图形都应体现技术创新点
- 图形应支持权利要求的保护范围
- 图形应展示技术方案的完整性
- 图形应体现技术效果的优势

## 附图更新维护

### 1. 版本控制
- 每个图形都应标注版本号
- 更新时应保留历史版本
- 重大修改应重新编号
- 版本变更应记录原因

### 2. 质量检查
- 定期检查图形的准确性
- 确保技术内容的一致性
- 验证标注信息的正确性
- 检查格式规范的符合性

### 3. 文档管理
- 图形文件应统一命名
- 存储位置应规范管理
- 访问权限应合理设置
- 备份策略应完善可靠
